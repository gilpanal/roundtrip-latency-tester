<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset=utf-8>
  <title>round trip latency test</title>
  <meta name="description" content="round trip latency test">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id=wrapperr>
    <div class=wrapper>
      <div id=explanations>
        <h1>Audio Roundtrip latency measurements</h1>
        <p>
          In a quiet environment, either:
        </p>
        <ul>
          <li>using the speakers of a computer, and the microphone of the computer
          <li>using headphones, and their microphone, or regular headphones and
            the microphone of the computer
        </ul>
        <p>
          Lower the volume of the output device, and in the case of headphones
          bring it closer to the mic (if at all possible).
        </p>
        <p>
          Click the button, and accept to share the microphone (it's not going
          anywhere, the code is simple just look at it).
        </p>
        <p>
          Gradually and slowly increase the output volume of the computer until a
          noise burst is hearable, and seen on the page, but low enough to not
          cause feedback.
        </p>
        <p>
          Adjust the red line with the slider, so that it falls just below the
          peaks of the waveform. When this is the case, note and report the two
          numbers in bold, along with the setup and contact info <a
            href="https://docs.google.com/spreadsheets/d/17rU23jfUFf3J6_YVsufon_eDP7OE_Lx-kNbCgqLeLxI/edit?usp=sharing">here</a>.
        </p>
        <p>
          For any question contact <code>padenot@mozilla.com</code>
        </p>
        <button id=start>Start measure</button>
        <button id=stop>Stop measure</button>
        <p><code>AudioContext sample-rate: </code>: <span id=sample-rate>...</span></p>
        <p>Measured rountrip: <span id=latency>...</span></p>
        <p>Computed output latency: <span id=computed>...</span></p>
      </div>
    </div>
    <div class=wrapper>
      <input type=range value=0.2 min=0.0 max=1.0 step=0.01 vertical orient="vertical">
      <canvas width=1024 height=768></canvas>
      <canvas id=debug width=1024 height=512></canvas>
      <div>
      </div>
    </div>
  </div>
  <script type="module" src="main.js"></script>
</body>

</html>